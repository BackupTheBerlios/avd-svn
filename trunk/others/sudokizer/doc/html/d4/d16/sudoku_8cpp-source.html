<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>sudokizer: proyectos/learning qt4/sudokizer/src/sudoku.cpp Source File</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.0 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../namespaces.html">Namespace List</a> | <a class="qindex" href="../../classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../dirs.html">Directories</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<div class="nav">
<a class="el" href="../../dir_000000.html">proyectos</a>&nbsp;/&nbsp;<a class="el" href="../../dir_000001.html">learning qt4</a>&nbsp;/&nbsp;<a class="el" href="../../dir_000002.html">sudokizer</a>&nbsp;/&nbsp;<a class="el" href="../../dir_000003.html">src</a></div>
<h1>sudoku.cpp</h1><a href="../../d1/d6b/sudoku_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">// See COPYING file for licensing information.</span>
00006 <span class="comment"></span><span class="preprocessor">#include "<a class="code" href="../../d5/dc8/sudoku_8h.html">sudoku.h</a>"</span>
00007 <span class="preprocessor">#include &lt;iostream&gt;</span>
00008 <span class="preprocessor">#include &lt;string&gt;</span>
00009 <span class="preprocessor">#include &lt;cstdlib&gt;</span>
00010 
<a name="l00011"></a><a class="code" href="../../d8/dcc/namespacestd.html">00011</a> <span class="keyword">namespace </span>std {
<a name="l00012"></a><a class="code" href="../../dd/d7a/namespacestd_1_1sudoku.html">00012</a> <span class="keyword">namespace </span>sudoku {
<a name="l00020"></a><a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a0">00020</a>         <span class="keyword">inline</span> Cell::Cell(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> P, state S)
00021                 : State(S)
00022         {
00023                 <span class="keywordflow">if</span>(P &gt; 0) {
00024                         <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#r1">Possibilities</a>[0] = P;
00025                         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 1; i &lt; 9; i++)
00026                                 <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#r1">Possibilities</a>[i] = 0;
00027                         
00028                         <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#r0">State</a> = S;
00029                 } <span class="keywordflow">else</span> {
00030                         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 9; i++)
00031                                 <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#r1">Possibilities</a>[i] = i + 1;
00032                         
00033                         <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#r0">State</a> = <a class="code" href="../../dd/d7a/namespacestd_1_1sudoku.html#a5a0">undecided</a>;
00034                 }
00035         }
00036         
<a name="l00041"></a><a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a2">00041</a>         <span class="keyword">inline</span> <span class="keywordtype">void</span> Cell::copy(<span class="keyword">const</span> <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html">Cell</a>&amp; copy)
00042         {
00043                 <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#r0">State</a> = <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a2">copy</a>.State;
00044                 
00045                 <span class="keywordflow">for</span>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; 9; i++)
00046                         <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#r1">Possibilities</a>[i] = <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a2">copy</a>.Possibilities[i];
00047         }
00048         
<a name="l00053"></a><a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a1">00053</a>         <span class="keyword">inline</span> Cell::Cell(<span class="keyword">const</span> <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html">Cell</a>&amp; copy)
00054         {
00055                 <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#r0">State</a> = <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a2">copy</a>.State;
00056                 
00057                 <span class="keywordflow">for</span>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; 9; i++)
00058                         <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#r1">Possibilities</a>[i] = <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a2">copy</a>.Possibilities[i];
00059         }
00060         
<a name="l00064"></a><a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a3">00064</a>         <span class="keyword">inline</span> Cell::~Cell() {
00065         }
00066         
<a name="l00073"></a><a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#h0">00073</a>         <span class="keywordtype">void</span> Cell::check(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myP) <span class="keywordflow">throw</span>(domain_error) {
00074                 <span class="keywordflow">if</span>(myP &gt;= 10 || myP == 0)
00075                         <span class="keywordflow">throw</span> domain_error(<span class="stringliteral">"possibilities can only be in a range of short unsigned integers [1,9], "</span> \
00076                         <span class="stringliteral">"but it was attempted to use 0 or one of value over 9"</span>);
00077         }
00078         
<a name="l00086"></a><a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#d0">00086</a>         <span class="keywordtype">void</span> Cell::fastDelPossibility(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myP) <span class="keywordflow">throw</span>(logic_error) {
00087                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 10; i++) {
00088                         <span class="keywordflow">if</span>(Possibilities[i] == 0)
00089                                 <span class="keywordflow">return</span>;
00090                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Possibilities[i] == myP) {
00091                                 <span class="comment">// Eliminate this value and shift to the left the remaining ones</span>
00092                                 <span class="keywordflow">for</span>(; i &lt; 9; i++) {
00093                                         <span class="keywordflow">if</span>(Possibilities[i + 1] == 0) {
00094                                                 Possibilities[i] = 0;
00095                                                 
00096                                                 <span class="comment">// If it's the only element left, automatically set it to definitive</span>
00097                                                 <span class="keywordflow">if</span>(i == 1)
00098                                                         State = <a class="code" href="../../dd/d7a/namespacestd_1_1sudoku.html#a5a1">definitive</a>;
00099                                                 
00100                                                 <span class="keywordflow">break</span>;
00101                                         } <span class="keywordflow">else</span>
00102                                                 Possibilities[i] = Possibilities[i + 1];
00103                                 }
00104                                 <span class="keywordflow">break</span>;
00105                         }
00106                 }
00107                 
00108                 <span class="keywordflow">if</span>(Possibilities[0] == 0) {
00109                         <span class="keywordflow">throw</span> logic_error(<span class="stringliteral">"No possibility is left, all of them were deleted"</span>);
00110                 }
00111         }
00112         
<a name="l00118"></a><a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#d2">00118</a>         <span class="keywordtype">void</span> Cell::fastAddPossibility(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myP) {
00119                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 10; i++) {
00120                         <span class="comment">// - If a possibility is set to 0, as it is by default, it means there are no more of them</span>
00121                         <span class="comment">// in the rest of the array</span>
00122                         <span class="keywordflow">if</span>(<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#r1">Possibilities</a>[i] == 0) {
00123                                 <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#r1">Possibilities</a>[i] = myP;
00124                                 <span class="keywordflow">return</span>;
00125                         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#r1">Possibilities</a>[i] == myP)
00126                                 <span class="keywordflow">return</span>;
00127                 }
00128         }
00129         
<a name="l00135"></a><a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#d3">00135</a>         <span class="keywordtype">bool</span> Cell::fastIsPossible(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myP)<span class="keyword"> const </span>{
00136                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 10; i++) {
00137                         <span class="keywordflow">if</span>(<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#r1">Possibilities</a>[i] == 0)
00138                                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00139                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#r1">Possibilities</a>[i] == myP)
00140                                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00141                 }
00142                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00143         }
00144         
<a name="l00148"></a><a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#d1">00148</a>         <span class="keywordtype">bool</span> Cell::fastCanDel(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myP)<span class="keyword">  const </span>{
00149                 <span class="keywordflow">if</span> (<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#r0">State</a> == <a class="code" href="../../dd/d7a/namespacestd_1_1sudoku.html#a5a0">undecided</a>)
00150                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00151                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (myP == <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#r1">Possibilities</a>[0]) {
00152                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00153                 }
00154 <span class="comment">//              printf("&gt;&gt; myP = %i vs. Possibilities[0] = %i\n", myP, Possibilities[0]);</span>
00155                 
00156                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00157         }
00158         
<a name="l00163"></a><a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#d4">00163</a>         <span class="keyword">inline</span> <span class="keywordtype">void</span> Cell::fastSet(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myP) {
00164                 <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#r0">State</a> = <a class="code" href="../../dd/d7a/namespacestd_1_1sudoku.html#a5a1">definitive</a>;
00165                 <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#r1">Possibilities</a>[0] = myP;
00166                 <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#r1">Possibilities</a>[1] = 0; <span class="comment">// the list "ends" in the first element set to zero</span>
00167         }
00168         
<a name="l00172"></a><a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a4">00172</a>         <span class="keyword">inline</span> <span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>* Cell::getPossibilities() {
00173                 <span class="keywordflow">return</span> <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#r1">Possibilities</a>;
00174         }
00175         
<a name="l00182"></a><a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a5">00182</a>         <span class="keywordtype">void</span> Cell::addPossibility(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myP) <span class="keywordflow">throw</span>(domain_error) {
00183                 
00184                 check(myP); <span class="comment">// this can throw domain_error</span>
00185                 
00186                 fastAddPossibility(myP);
00187         }
00188         
<a name="l00195"></a><a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a7">00195</a>         <span class="keyword">inline</span> <span class="keywordtype">void</span> Cell::set(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myP) <span class="keywordflow">throw</span>(domain_error) {
00196         
00197                 check(myP); <span class="comment">// this can throw domain_error</span>
00198                 
00199                 <span class="keywordflow">if</span>(!fastIsPossible(myP))
00200                         <span class="keywordflow">throw</span> domain_error(<span class="stringliteral">"Attempted to set a definitive value to a cell which was not within "</span> \
00201                         <span class="stringliteral">"the possibilities list of the cell"</span>);
00202                 
00203                 fastSet(myP);
00204         }
00205         
00206         
00207         
00208         
<a name="l00215"></a><a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a8">00215</a>         <span class="keyword">inline</span> <span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> Cell::get() throw(logic_error) {
00216                 <span class="keywordflow">if</span>(<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#r0">State</a> == <a class="code" href="../../dd/d7a/namespacestd_1_1sudoku.html#a5a1">definitive</a>)
00217                         <span class="keywordflow">return</span> <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#r1">Possibilities</a>[0];
00218                 <span class="keywordflow">else</span>
00219                         <span class="keywordflow">throw</span> logic_error(<span class="stringliteral">"Tried to get cell value when it's still undecided"</span>);
00220         }
00221         
<a name="l00229"></a><a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a6">00229</a>         <span class="keywordtype">void</span> Cell::delPossibility(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myP) <span class="keywordflow">throw</span>(logic_error) {
00230                 <span class="keywordflow">try</span> {
00231                         check(myP);
00232                 } <span class="keywordflow">catch</span>(...) {
00233                         <span class="keywordflow">return</span>;
00234                 }
00235                 
00236                 fastDelPossibility(myP); <span class="comment">// this can throw logic_error</span>
00237         }
00238         
<a name="l00245"></a><a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a9">00245</a>         <span class="keywordtype">bool</span> Cell::isPossible(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myP)<span class="keyword"> const </span>{
00246                 <span class="keywordflow">try</span> {
00247                         <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#h0">check</a>(myP);
00248                 } <span class="keywordflow">catch</span>(...) {
00249                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00250                 }
00251                 
00252                 <span class="keywordflow">return</span> <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#d3">fastIsPossible</a>(myP);
00253         }
00254         
<a name="l00260"></a><a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a10">00260</a>         <span class="keyword">inline</span> <a class="code" href="../../dd/d7a/namespacestd_1_1sudoku.html#a5">state</a> Cell::getState()<span class="keyword"> const </span>{
00261                 <span class="keywordflow">return</span> <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#r0">State</a>;
00262         }
00263         
<a name="l00269"></a><a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a11">00269</a>         <span class="keyword">inline</span> <span class="keywordtype">void</span> Cell::setState(state S) {
00270                 
00271                 <span class="comment">// Clean the possiblities list if needed</span>
00272                 <span class="keywordflow">if</span>(<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#r0">State</a> == <a class="code" href="../../dd/d7a/namespacestd_1_1sudoku.html#a5a1">definitive</a> &amp;&amp; S == <a class="code" href="../../dd/d7a/namespacestd_1_1sudoku.html#a5a0">undecided</a>)
00273                 {
00274                         <span class="comment">// Note that as we always need at least one value in the possiblities list</span>
00275                         <span class="comment">// we keep the first one (Possibilities[0])</span>
00276                         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 1; i &lt; 9; i++)
00277                                 <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#r1">Possibilities</a>[i] = 0;
00278                 }
00279                 
00280                 <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#r0">State</a> = S;
00281         }
00282         
<a name="l00286"></a><a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a12">00286</a>         <span class="keyword">inline</span> <span class="keywordtype">void</span> Cell::erase() {
00287                 <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#r0">State</a> = <a class="code" href="../../dd/d7a/namespacestd_1_1sudoku.html#a5a0">undecided</a>;
00288                 
00289                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 9; i++)
00290                         <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#r1">Possibilities</a>[i] = i + 1;
00291         }
00292         
<a name="l00300"></a><a class="code" href="../../d6/df4/classstd_1_1sudoku_1_1Box.html#a0">00300</a>         <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html">Cell</a>** Box::operator[] (<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i) <span class="keywordflow">throw</span>(domain_error) {
00301                 <span class="keywordflow">if</span>(i &lt; 3)
00302                         <span class="keywordflow">return</span> elements[i];
00303                 <span class="keywordflow">else</span>
00304                         <span class="keywordflow">throw</span> domain_error(<span class="stringliteral">"Tried to access to an illegal array 'x' index for the elements of a Box"</span>);
00305         }
00306         
<a name="l00315"></a><a class="code" href="../../d6/df4/classstd_1_1sudoku_1_1Box.html#a1">00315</a>         <span class="keywordtype">void</span> Box::delPossibility(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myP, <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html">Cell</a> &amp;cell) throw(logic_error) {
00316                 <span class="keywordflow">try</span> {
00317                         Cell::check(myP);
00318                 } <span class="keywordflow">catch</span>(...) {
00319                         <span class="keywordflow">return</span>;
00320                 }
00321                 
00322                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 3; i++)
00323                         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; 3; j++)
00324                                 <span class="keywordflow">if</span>(<a class="code" href="../../d6/df4/classstd_1_1sudoku_1_1Box.html#r0">elements</a>[i][j] != &amp;cell)
00325                                         <a class="code" href="../../d6/df4/classstd_1_1sudoku_1_1Box.html#r0">elements</a>[i][j]-&gt;<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#d0">fastDelPossibility</a>(myP); <span class="comment">// this can throw logic_error</span>
00326         }
00327         
00328         
<a name="l00334"></a><a class="code" href="../../d6/df4/classstd_1_1sudoku_1_1Box.html#a2">00334</a>         <span class="keywordtype">void</span> Box::addPossibility(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myP) {
00335                 <span class="keywordflow">try</span> {
00336                         Cell::check(myP);
00337                 } <span class="keywordflow">catch</span>(...) {
00338                         <span class="keywordflow">return</span>;
00339                 }
00340                 
00341                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 3; i++)
00342                         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; 3; j++)
00343                                 <a class="code" href="../../d6/df4/classstd_1_1sudoku_1_1Box.html#r0">elements</a>[i][j]-&gt;<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#d2">fastAddPossibility</a>(myP);
00344         }
00345         
<a name="l00353"></a><a class="code" href="../../d6/df4/classstd_1_1sudoku_1_1Box.html#a3">00353</a>         <span class="keywordtype">bool</span> Box::isPossible(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myP, <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html">Cell</a>&amp; cell)<span class="keyword"> const </span>{
00354                 <span class="keywordflow">try</span> {
00355                         Cell::check(myP);
00356                 } <span class="keywordflow">catch</span>(...) {
00357                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00358                 }
00359                 
00360                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 3; i++)
00361                         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; 3; j++)
00362                                 <span class="keywordflow">if</span>(<a class="code" href="../../d6/df4/classstd_1_1sudoku_1_1Box.html#r0">elements</a>[i][j] != &amp;cell &amp;&amp; <a class="code" href="../../d6/df4/classstd_1_1sudoku_1_1Box.html#r0">elements</a>[i][j]-&gt;<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a9">isPossible</a>(myP))
00363                                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00364                 
00365                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00366         }
00367         
<a name="l00374"></a><a class="code" href="../../d6/df4/classstd_1_1sudoku_1_1Box.html#a4">00374</a>         <span class="keywordtype">bool</span> Box::canDel(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myP, <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html">Cell</a>&amp; cell)<span class="keyword"> const </span>{
00375                 <span class="keywordflow">try</span> {
00376                         Cell::check(myP);
00377                 } <span class="keywordflow">catch</span>(...) {
00378                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00379                 }
00380                 
00381                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 3; i++)
00382                         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; 3; j++)
00383                                 <span class="keywordflow">if</span>(<a class="code" href="../../d6/df4/classstd_1_1sudoku_1_1Box.html#r0">elements</a>[i][j] != &amp;cell &amp;&amp; !<a class="code" href="../../d6/df4/classstd_1_1sudoku_1_1Box.html#r0">elements</a>[i][j]-&gt;<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#d1">fastCanDel</a>(myP))
00384                                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00385                 
00386                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00387         }
00388         
<a name="l00393"></a><a class="code" href="../../d9/d82/classstd_1_1sudoku_1_1Line.html#a0">00393</a>         Line::operator Cell**() {
00394                 <span class="keywordflow">return</span> <a class="code" href="../../d9/d82/classstd_1_1sudoku_1_1Line.html#r0">elements</a>;
00395         }
00396         
<a name="l00401"></a><a class="code" href="../../d9/d82/classstd_1_1sudoku_1_1Line.html#a5">00401</a>         <span class="keywordtype">void</span> Line::deleteAll() {
00402                 <span class="keywordflow">for</span>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; 9; i++)
00403                         <span class="keyword">delete</span> <a class="code" href="../../d9/d82/classstd_1_1sudoku_1_1Line.html#r0">elements</a>[i];
00404         }
00405         
<a name="l00414"></a><a class="code" href="../../d9/d82/classstd_1_1sudoku_1_1Line.html#a1">00414</a>         <span class="keywordtype">void</span> Line::delPossibility(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myP, <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html">Cell</a>&amp; cell) throw(logic_error) {
00415                 <span class="keywordflow">try</span> {
00416                         Cell::check(myP);
00417                 } <span class="keywordflow">catch</span>(...) {
00418                         <span class="keywordflow">return</span>;
00419                 }
00420                 
00421                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 9; i++)
00422                         <span class="keywordflow">if</span>(<a class="code" href="../../d9/d82/classstd_1_1sudoku_1_1Line.html#r0">elements</a>[i] != &amp;cell)
00423                                 <a class="code" href="../../d9/d82/classstd_1_1sudoku_1_1Line.html#r0">elements</a>[i]-&gt;<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#d0">fastDelPossibility</a>(myP); <span class="comment">// this can throw logic_error</span>
00424                         
00425                 
00426         }
00427         
<a name="l00433"></a><a class="code" href="../../d9/d82/classstd_1_1sudoku_1_1Line.html#a2">00433</a>         <span class="keywordtype">void</span> Line::addPossibility(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myP) {
00434                 <span class="keywordflow">try</span> {
00435                         Cell::check(myP);
00436                 } <span class="keywordflow">catch</span>(...) {
00437                         <span class="keywordflow">return</span>;
00438                 }
00439                 
00440                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 3; i++)
00441                         <a class="code" href="../../d9/d82/classstd_1_1sudoku_1_1Line.html#r0">elements</a>[i]-&gt;<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#d2">fastAddPossibility</a>(myP);
00442         }
00443         
<a name="l00451"></a><a class="code" href="../../d9/d82/classstd_1_1sudoku_1_1Line.html#a3">00451</a>         <span class="keywordtype">bool</span> Line::isPossible(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myP, <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html">Cell</a>&amp; cell)<span class="keyword"> const </span>{
00452                 <span class="keywordflow">try</span> {
00453                         Cell::check(myP);
00454                 } <span class="keywordflow">catch</span>(...) {
00455                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00456                 }
00457                 
00458                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 9; i++)
00459                         <span class="keywordflow">if</span>(<a class="code" href="../../d9/d82/classstd_1_1sudoku_1_1Line.html#r0">elements</a>[i] != &amp;cell &amp;&amp; <a class="code" href="../../d9/d82/classstd_1_1sudoku_1_1Line.html#r0">elements</a>[i]-&gt;<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a9">isPossible</a>(myP))
00460                                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00461                 
00462                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00463         }
00464         
<a name="l00471"></a><a class="code" href="../../d9/d82/classstd_1_1sudoku_1_1Line.html#a4">00471</a>         <span class="keywordtype">bool</span> Line::canDel(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myP, <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html">Cell</a>&amp; cell)<span class="keyword"> const </span>{
00472                 <span class="keywordflow">try</span> {
00473                         Cell::check(myP);
00474                 } <span class="keywordflow">catch</span>(...) {
00475                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00476                 }
00477                 
00478                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 9; i++)
00479                                 <span class="keywordflow">if</span>(<a class="code" href="../../d9/d82/classstd_1_1sudoku_1_1Line.html#r0">elements</a>[i] != &amp;cell &amp;&amp; !<a class="code" href="../../d9/d82/classstd_1_1sudoku_1_1Line.html#r0">elements</a>[i]-&gt;<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#d1">fastCanDel</a>(myP))
00480                                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00481                 
00482                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00483         }
00484         
<a name="l00491"></a><a class="code" href="../../d9/d82/classstd_1_1sudoku_1_1Line.html#a6">00491</a>         <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html">Cell</a> Line::copy(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i) <span class="keyword">const</span> <span class="keywordflow">throw</span>(domain_error) {
00492                 Cell::check(i - 1);
00493                 
00494                 <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html">Cell</a> c = *elements[i];
00495                 <span class="keywordflow">return</span> c;
00496         }
00497         
<a name="l00503"></a><a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#a0">00503</a>         Board::Board() {
00504                 <span class="keywordflow">for</span>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0, ii = 0, I = 0; I &lt; 9; I++, (I % 3 == 0) ? i++ : i, ii = I % 3) {
00505                         <span class="keywordflow">for</span>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0, jj = 0, J = 0; J &lt; 9; J++, (J % 3 == 0) ? j++ : j, jj = J % 3) {
00506                                 <a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#r2">Boxes</a>[i][j][ii][jj] = <span class="keyword">new</span> <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html">Cell</a>();
00507                                 <a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#r1">Rows</a>[I][J] = <a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#r2">Boxes</a>[i][j][ii][jj];
00508                                 <a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#r0">Cols</a>[J][I] = <a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#r1">Rows</a>[I][J];
00509                         }
00510                 }
00511         }
<a name="l00518"></a><a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#a1">00518</a>         Board::Board(<a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html">Board</a>* solution, <span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> solvedCells) {
00519                 <span class="keywordtype">bool</span> iterate = <span class="keyword">true</span>;
00520                 <span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tolerance = 30;
00521                 
00522                 <span class="comment">// initialize the cells</span>
00523                 <span class="keywordflow">for</span>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0, ii = 0, I = 0; I &lt; 9; I++, (I % 3 == 0) ? i++ : i, ii = I % 3) {
00524                         <span class="keywordflow">for</span>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0, jj = 0, J = 0; J &lt; 9; J++, (J % 3 == 0) ? j++ : j, jj = J % 3) {
00525                                 <a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#r1">Rows</a>[I][J] = <span class="keyword">new</span> <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html">Cell</a>();
00526                                 <a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#r2">Boxes</a>[i][j][ii][jj] = <a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#r1">Rows</a>[I][J];
00527                                 <a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#r0">Cols</a>[J][I] = <a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#r1">Rows</a>[I][J];
00528                         }
00529                 }
00530                 
00531                 <span class="comment">// In each iteration, a potential "game" is created from scratch (a clean board), and the loop</span>
00532                 <span class="comment">// iterates till it creates a solveable game</span>
00533                 <span class="keywordflow">while</span>(iterate) {
00534                         <span class="comment">// Erase board cells</span>
00535                         <span class="keywordflow">for</span>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> I = 0; I &lt; 9; I++)
00536                                 <span class="keywordflow">for</span>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> J = 0; J &lt; 9; J++)
00537                                         <a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#r1">Rows</a>[I][J]-&gt;erase();
00538                         
00539                         <span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/d7a/namespacestd_1_1sudoku.html#a5">state</a> = 0;
00540                         <span class="keywordtype">bool</span> solved;
00541                         
00542                         <span class="comment">// Set a cell a new cell is set to definitive state</span>
00543                         <span class="keywordflow">while</span>(<a class="code" href="../../dd/d7a/namespacestd_1_1sudoku.html#a5">state</a> &lt; solvedCells) {
00544                                 <span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> I, J, i, j, val;
00545                                 
00546                                 <span class="comment">// Pseudo randomly Locate an undecided cell</span>
00547                                 <span class="keywordflow">do</span> {
00548                                         I = Generator::nextValue(9,0);
00549                                         J = Generator::nextValue(9,0);
00550                                         i = I / 3;
00551                                         j = J / 3;
00552                                 } <span class="keywordflow">while</span> (<a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#r1">Rows</a>[I][J]-&gt;<a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#a5">getState</a>());
00553                                 
00554                                 <span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tries = 0;
00555                                 solved = <span class="keyword">false</span>;
00556                                 
00557                                 <span class="comment">// Try &lt;tolerance&gt; times to solve it with randomly generated values</span>
00558                                 <span class="keywordflow">do</span> {
00559                                         tries++;
00560                                         val = Generator::nextValue();
00561                                         solved = Generator::solveCell(*<a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#r1">Rows</a>[I][J], <a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#r1">Rows</a>[I], <a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#r0">Cols</a>[J], <a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#r2">Boxes</a>[i][j], val);
00562                                 } <span class="keywordflow">while</span> (!solved &amp;&amp; tries &lt; tolerance);
00563                                 
00564                                 
00565                                 <span class="comment">// If after &lt;tolerance&gt; we couldn't solve the cell, we asume the cell</span>
00566                                 <span class="comment">// is not solveable and thus the game is invalid, so we'll restart</span>
00567                                 <span class="comment">// the creation of the game</span>
00568                                 <span class="keywordflow">if</span>(!solved)
00569                                         <span class="comment">//reiterate</span>
00570                                         <span class="keywordflow">break</span>;
00571                                 <span class="keywordflow">else</span>
00572                                         <span class="comment">// A cell was successfully set to a definitive state</span>
00573                                         <a class="code" href="../../dd/d7a/namespacestd_1_1sudoku.html#a5">state</a>++;
00574                         }
00575                         
00576                         <span class="comment">// We successfully set &lt;solvedCells&gt; number of cells to a definitive</span>
00577                         <span class="comment">// state, but the game created might be still unsolveable. so we'll try</span>
00578                         <span class="comment">// to solve it. If it's not solveable, restart the creation of the game</span>
00579                         <span class="comment">// from scratch.  But ff it's a valid game this constructor has finished</span>
00580                         <span class="comment">// its  task</span>
00581                         <span class="keywordflow">if</span>(solved) {
00582                                 <span class="keywordflow">for</span>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> I = 0; I &lt; 9; I++)
00583                                         <span class="keywordflow">for</span>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> J = 0; J &lt; 9; J++)
00584                                                 solution-&gt;Rows[I][J]-&gt;<a class="code" href="../../d9/d82/classstd_1_1sudoku_1_1Line.html#a6">copy</a>(*<a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#r1">Rows</a>[I][J]);
00585                                 
00586                                 <span class="keywordflow">try</span> {
00587                                         Solver::resolve(*solution); <span class="comment">// this might throw some exceptions if the game is unsolveable</span>
00588                                         
00589                                         <span class="comment">// Valid game found!</span>
00590                                         <span class="keywordflow">if</span> (solution-&gt;getState() == <a class="code" href="../../dd/d7a/namespacestd_1_1sudoku.html#a5a1">definitive</a>)
00591                                                 iterate = <span class="keyword">false</span>;
00592                                 } <span class="keywordflow">catch</span> (...) {
00593                                         <span class="comment">// Exceptions thrown -&gt; game unsolveable -&gt; reiterate -&gt; Erase the board and reiterate</span>
00594                                 }
00595                         }
00596                 }
00597         }
00598         
<a name="l00603"></a><a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#a2">00603</a>         Board::Board(<span class="keyword">const</span> <a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html">Board</a>&amp; copy) {
00604                 <span class="keywordflow">for</span>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0, ii = 0, I = 0; I &lt; 9; I++, (I % 3 == 0) ? i++ : i, ii = I % 3) {
00605                         <span class="keywordflow">for</span>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0, jj = 0, J = 0; J &lt; 9; J++, (J % 3 == 0) ? j++ : j, jj = J % 3) {
00606                                 <span class="keyword">const</span> <a class="code" href="../../d9/d82/classstd_1_1sudoku_1_1Line.html">Line</a> l = copy.Rows[I];
00607                                 <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html">Cell</a> c = l.<a class="code" href="../../d9/d82/classstd_1_1sudoku_1_1Line.html#a6">copy</a>(J);
00608                                 <a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#r2">Boxes</a>[i][j][ii][jj] = <span class="keyword">new</span> <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html">Cell</a>(c);
00609                                 <a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#r1">Rows</a>[I][J] = <a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#r2">Boxes</a>[i][j][ii][jj];
00610                                 <a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#r0">Cols</a>[J][I] = <a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#r1">Rows</a>[I][J];
00611                         }
00612                 }
00613         }
00614         
00615         
<a name="l00620"></a><a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#a3">00620</a>         Board::~Board() {
00621                 <span class="keywordflow">for</span>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; 10; i++) {
00622                         <a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#r1">Rows</a>[i].<a class="code" href="../../d9/d82/classstd_1_1sudoku_1_1Line.html#a5">deleteAll</a>();
00623                 }
00624         }
00625         
<a name="l00634"></a><a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#a4">00634</a>         <span class="keyword">inline</span> <a class="code" href="../../d9/d82/classstd_1_1sudoku_1_1Line.html">Line</a>&amp; Board::operator[](<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i) <span class="keywordflow">throw</span> (domain_error) {
00635                 <span class="keywordflow">if</span>(i &lt; 9)
00636                         <span class="keywordflow">return</span> Rows[i];
00637                 <span class="keywordflow">else</span>
00638                         <span class="keywordflow">throw</span> domain_error(<span class="stringliteral">"Attempted to access to a non-existant column with an out-of-range 'x' index"</span>);
00639         }
00640         
<a name="l00644"></a><a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#a5">00644</a>         <a class="code" href="../../dd/d7a/namespacestd_1_1sudoku.html#a5">state</a> Board::getState() {
00645                 
00646                 <span class="keywordflow">for</span>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; 9; i++)
00647                         <span class="keywordflow">for</span>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; 9; j++)
00648                                 <span class="keywordflow">if</span>(<a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#r1">Rows</a>[i][j]-&gt;getState() == <a class="code" href="../../dd/d7a/namespacestd_1_1sudoku.html#a5a0">undecided</a>)
00649                                         <span class="keywordflow">return</span> <a class="code" href="../../dd/d7a/namespacestd_1_1sudoku.html#a5a0">undecided</a>;
00650                 
00651                 <span class="keywordflow">return</span> <a class="code" href="../../dd/d7a/namespacestd_1_1sudoku.html#a5a1">definitive</a>;
00652         }
00653         
<a name="l00662"></a><a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#a6">00662</a>         <span class="keyword">inline</span> <a class="code" href="../../d9/d82/classstd_1_1sudoku_1_1Line.html">Line</a>&amp; Board::getCol(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i) <span class="keywordflow">throw</span>(domain_error) {
00663                 <span class="keywordflow">if</span> (i &lt; 9)
00664                         <span class="keywordflow">return</span> Cols[i];
00665                 <span class="keywordflow">else</span>
00666                         <span class="keywordflow">throw</span> domain_error(<span class="stringliteral">"Attempted to access to a non-existant column with an out-of-range 'x' index"</span>);
00667         }
00668         
<a name="l00675"></a><a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#a7">00675</a>         <span class="keyword">inline</span> <a class="code" href="../../d9/d82/classstd_1_1sudoku_1_1Line.html">Line</a>&amp; Board::getRow(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i) <span class="keywordflow">throw</span>(domain_error) {
00676                 <span class="keywordflow">if</span> (i &lt; 9)
00677                         <span class="keywordflow">return</span> Rows[i];
00678                 <span class="keywordflow">else</span>
00679                         <span class="keywordflow">throw</span> domain_error(<span class="stringliteral">"Attempted to access to a non-existant Row with an out-of-range 'y' index"</span>);
00680         }
00681         
<a name="l00689"></a><a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#a8">00689</a>         <span class="keyword">inline</span> <a class="code" href="../../d6/df4/classstd_1_1sudoku_1_1Box.html">Box</a>&amp; Board::getBox(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i,<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j) <span class="keywordflow">throw</span>(domain_error) {
00690                 <span class="keywordflow">if</span> (i &lt; 3 &amp;&amp; j &lt; 3)
00691                         <span class="keywordflow">return</span> Boxes[i][j];
00692                 <span class="keywordflow">else</span>
00693                         <span class="keywordflow">throw</span> domain_error(<span class="stringliteral">"Tried to get to a non existant Box by invalid suplied 'x' and 'y' indexes"</span>);
00694         }
00695         
<a name="l00703"></a><a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#a9">00703</a>         <span class="keyword">inline</span> <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html">Cell</a>&amp; Board::getCell(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, <span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j) <span class="keywordflow">throw</span>(domain_error) {
00704                 <span class="keywordflow">if</span> (i &lt; 9 &amp;&amp; j &lt; 9) {
00705                         <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html">Cell</a>** cell = Rows[i];
00706                         <span class="keywordflow">return</span> *cell[j];
00707                 } <span class="keywordflow">else</span>
00708                         <span class="keywordflow">throw</span> domain_error(<span class="stringliteral">"Tried to get to a non existant Cell providing invalid 'x' and 'y' indexes"</span>);
00709         }
00710         
00711         
<a name="l00720"></a><a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html#a10">00720</a>         <span class="keyword">inline</span> <span class="keywordtype">void</span> Board::setCell(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, <span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j, <span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> value) <span class="keywordflow">throw</span>(domain_error) {
00721                 <span class="keywordflow">if</span> (i &lt; 9 &amp;&amp; j &lt; 9) {
00722                         Rows[i][j]-&gt;<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a7">set</a>(value); <span class="comment">// this can throw domain_error</span>
00723                 } <span class="keywordflow">else</span>
00724                         <span class="keywordflow">throw</span> domain_error(<span class="stringliteral">"Tried to set to a non existant Cell providing invalid 'x' and 'y' indexes"</span>);
00725         }
00726         
<a name="l00731"></a><a class="code" href="../../d8/d21/classstd_1_1sudoku_1_1Solver.html#h0">00731</a>         <span class="keywordtype">void</span> Solver::updatePossibilities(<a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html">Board</a>&amp; Sudoku) throw(logic_error) {
00732                 <span class="keywordflow">for</span>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0, I = 0; I &lt; 9; I++, (I % 3 == 0) ? i++ : i) {
00733                         <span class="keywordflow">for</span>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0, J = 0; J &lt; 9; J++, (J % 3 == 0) ? j++ : j) {
00734                                 <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html">Cell</a>&amp; cell = *(Sudoku.Rows[I][J]);
00735                                 
00736                                 <span class="keywordflow">if</span>(cell.<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a10">getState</a>() == <a class="code" href="../../dd/d7a/namespacestd_1_1sudoku.html#a5a1">definitive</a>)
00737                                 {
00738                                         <span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> p = cell.<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a8">get</a>();
00739                                         Sudoku.Boxes[i][j].<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a6">delPossibility</a>(p, cell); <span class="comment">// this can throw logic_error</span>
00740                                         Sudoku.Rows[I].<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a6">delPossibility</a>(p, cell); <span class="comment">// this can throw logic_error</span>
00741                                         Sudoku.Cols[J].<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a6">delPossibility</a>(p, cell); <span class="comment">// this can throw logic_error</span>
00742                                 }
00743                         }
00744                 }
00745         }
00746         
<a name="l00760"></a><a class="code" href="../../d8/d21/classstd_1_1sudoku_1_1Solver.html#h1">00760</a>         <span class="keywordtype">bool</span> Solver::solveCell(<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html">Cell</a>&amp; cell, <a class="code" href="../../d9/d82/classstd_1_1sudoku_1_1Line.html">Line</a>&amp; row, <a class="code" href="../../d9/d82/classstd_1_1sudoku_1_1Line.html">Line</a>&amp; col, <a class="code" href="../../d6/df4/classstd_1_1sudoku_1_1Box.html">Box</a>&amp; box) throw(domain_error, logic_error) {
00761                 
00762                 <span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>* Possibilities = cell.<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a4">getPossibilities</a>();
00763                 
00764                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; Possibilities[i] != 0 &amp;&amp; i &lt; 9; i++) {
00765                         <span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pos = Possibilities[i];
00766                         
00767                         <span class="keywordflow">if</span>(!row.isPossible(pos, cell)) {
00768                                 cell.<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a7">set</a>(pos); <span class="comment">// this can throw domain_error</span>
00769                                 col.<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a6">delPossibility</a>(pos, cell); <span class="comment">// this can throw logic_error</span>
00770                                 box.<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a6">delPossibility</a>(pos, cell); <span class="comment">// this can throw logic_error</span>
00771                                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00772                         } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!col.isPossible(pos, cell)) {
00773                                 cell.<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a7">set</a>(pos); <span class="comment">// this can throw domain_error</span>
00774                                 row.<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a6">delPossibility</a>(pos, cell); <span class="comment">// this can throw logic_error</span>
00775                                 box.<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a6">delPossibility</a>(pos, cell); <span class="comment">// this can throw logic_error</span>
00776                                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00777                         } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!box.isPossible(pos, cell)) {
00778                                 cell.<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a7">set</a>(pos); <span class="comment">// this can throw domain_error</span>
00779                                 col.<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a6">delPossibility</a>(pos, cell); <span class="comment">// this can throw logic_error</span>
00780                                 row.<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a6">delPossibility</a>(pos, cell); <span class="comment">// this can throw logic_error</span>
00781                                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00782                         }
00783                 }
00784                 
00785                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00786         }
00787         
<a name="l00792"></a><a class="code" href="../../d8/d21/classstd_1_1sudoku_1_1Solver.html#e0">00792</a>         <span class="keywordtype">void</span> Solver::resolve(<a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html">Board</a>&amp; Sudoku) {
00793                 <span class="keywordtype">bool</span> loop = <span class="keyword">true</span>, temp;
00794                 
00795                 <a class="code" href="../../d8/d21/classstd_1_1sudoku_1_1Solver.html#h0">updatePossibilities</a>(Sudoku);
00796                 
00797                 <span class="keywordflow">while</span>(loop) {
00798                         loop = <span class="keyword">false</span>;
00799                         
00800                         <span class="keywordflow">for</span>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0, I=0; I &lt; 9; I++, (I % 3 == 0) ? i++ : i) {
00801                                 <span class="keywordflow">for</span>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0, J = 0; J &lt; 9; J++, (J % 3 == 0) ? j++ : j) {
00802                                         <span class="keywordflow">if</span> (Sudoku.Rows[I][J]-&gt;getState() == <a class="code" href="../../dd/d7a/namespacestd_1_1sudoku.html#a5a0">undecided</a>) {
00803                                                 temp = <a class="code" href="../../d8/d21/classstd_1_1sudoku_1_1Solver.html#h1">solveCell</a>(*Sudoku.Rows[I][J], Sudoku.Rows[I], Sudoku.Cols[J], Sudoku.Boxes[i][j]);
00804                                                 
00805                                                 <span class="keywordflow">if</span>(temp &amp;&amp; !loop)
00806                                                         loop = <span class="keyword">true</span>;
00807                                         }
00808                                 }
00809                         }
00810                 }
00811         }
00812         
<a name="l00817"></a><a class="code" href="../../dd/d67/classstd_1_1sudoku_1_1Display.html#e0">00817</a>         <span class="keywordtype">void</span> Display::show(<a class="code" href="../../db/d2e/classstd_1_1sudoku_1_1Board.html">Board</a>&amp; Sudoku) {
00818                 
00819                 system(<span class="stringliteral">"clear"</span>);
00820                 string lineSeparator1(<span class="stringliteral">"---||---|---|---||---|---|---||---|---|---||\n"</span>),
00821                         lineSeparator2(<span class="stringliteral">"===||###|###|###||###|###|###||###|###|###||\n"</span>);
00822                 
00823                 cout &lt;&lt; <span class="stringliteral">"y\\x|| 1 | 2 | 3 || 4 | 5 | 6 || 7 | 8 | 9 ||\n"</span>;
00824                 cout &lt;&lt; lineSeparator2;
00825                 
00826                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 9; i++) {
00827                         cout &lt;&lt; <span class="stringliteral">" "</span> &lt;&lt; i+1 &lt;&lt; <span class="stringliteral">" || "</span>;
00828                         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; 9; j++) {
00829                                 <a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html">Cell</a>&amp; cell = *Sudoku[i][j];
00830                                 
00831                                 <span class="keywordflow">if</span>(cell.<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#r0">State</a> == <a class="code" href="../../dd/d7a/namespacestd_1_1sudoku.html#a5a1">definitive</a>)
00832                                         cout &lt;&lt; cell.<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#r1">Possibilities</a>[0];
00833                                 <span class="keywordflow">else</span>
00834                                         cout &lt;&lt; <span class="stringliteral">" "</span>;
00835                                 
00836                                 <span class="keywordflow">if</span>((j + 1) % 3 == 0)
00837                                         cout &lt;&lt; <span class="stringliteral">" || "</span>;
00838                                 <span class="keywordflow">else</span>
00839                                         cout &lt;&lt; <span class="stringliteral">" | "</span>;
00840                                 
00841                         }
00842                         <span class="keywordflow">if</span>((i + 1) % 3 == 0)
00843                                 cout &lt;&lt; endl &lt;&lt; lineSeparator2;
00844                         <span class="keywordflow">else</span>
00845                                 cout &lt;&lt; endl &lt;&lt; lineSeparator1;
00846                 }
00847         }
00848         
<a name="l00854"></a><a class="code" href="../../da/d36/classstd_1_1sudoku_1_1Generator.html#e1">00854</a>         <span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> Generator::nextValue(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> mod, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> min) {
00855                 <span class="keyword">static</span> <span class="keywordtype">bool</span> firstTime;
00856                 <span class="keywordflow">if</span>(!firstTime)
00857                 {
00858                         srand((<span class="keywordtype">unsigned</span>)time(0));
00859                         firstTime = <span class="keyword">true</span>;
00860                 }
00861                 <span class="keywordtype">float</span> f = static_cast&lt;float&gt;(rand()) / RAND_MAX;
00862                 <span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = (min + static_cast&lt;short unsigned int&gt;(mod * f)) % mod;
00863                 
00864                 <span class="keywordflow">return</span> i;
00865         }
00866         
<a name="l00879"></a><a class="code" href="../../da/d36/classstd_1_1sudoku_1_1Generator.html#e0">00879</a>         <span class="keywordtype">bool</span> Generator::solveCell(<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html">Cell</a>&amp; cell, <a class="code" href="../../d9/d82/classstd_1_1sudoku_1_1Line.html">Line</a>&amp; row, <a class="code" href="../../d9/d82/classstd_1_1sudoku_1_1Line.html">Line</a>&amp; col, <a class="code" href="../../d6/df4/classstd_1_1sudoku_1_1Box.html">Box</a>&amp; box, <span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sol) <span class="keywordflow">throw</span>(domain_error, logic_error) {
00880                 <span class="keywordflow">if</span>(cell.isPossible(sol) &amp;&amp; row.canDel(sol, cell) &amp;&amp; col.canDel(sol, cell) &amp;&amp; box.canDel(sol, cell)) {
00881                         cell.<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a7">set</a>(sol); <span class="comment">// this can theoretically throw domain_error but shouldn't</span>
00882                         row.<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a6">delPossibility</a>(sol, cell); <span class="comment">// this can throw logic_error</span>
00883                         col.<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a6">delPossibility</a>(sol, cell); <span class="comment">// this can throw logic_error</span>
00884                         box.<a class="code" href="../../de/dc9/classstd_1_1sudoku_1_1Cell.html#a6">delPossibility</a>(sol, cell); <span class="comment">// this can throw logic_error</span>
00885                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00886                 }
00887                 
00888                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00889         }
00890 }
00891 }
00892 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Oct 12 20:57:00 2005 for sudokizer by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.0 </small></address>
</body>
</html>
