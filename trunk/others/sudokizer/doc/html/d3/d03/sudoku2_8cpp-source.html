<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>sudokizer: proyectos/learning qt4/sudokizer/src/sudoku2.cpp Source File</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.0 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../namespaces.html">Namespace List</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../dirs.html">Directories</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<div class="nav">
<a class="el" href="../../dir_000000.html">proyectos</a>&nbsp;/&nbsp;<a class="el" href="../../dir_000001.html">learning qt4</a>&nbsp;/&nbsp;<a class="el" href="../../dir_000002.html">sudokizer</a>&nbsp;/&nbsp;<a class="el" href="../../dir_000003.html">src</a></div>
<h1>sudoku2.cpp</h1><a href="../../d1/d30/sudoku2_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">// See COPYING file for licensing information.</span>
00006 <span class="comment"></span><span class="preprocessor">#include "<a class="code" href="../../d8/d99/sudoku2_8h.html">sudoku2.h</a>"</span>
00007 <span class="preprocessor">#include &lt;iostream&gt;</span>
00008 <span class="preprocessor">#include &lt;string&gt;</span>
00009 <span class="preprocessor">#include &lt;cstdlib&gt;</span>
00010 <span class="preprocessor">#include &lt;cstdio&gt;</span>
00011 
00012 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00013 <span class="keyword">using</span> <span class="keyword">namespace </span>sudoku;
00014         
<a name="l00022"></a><a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#a0">00022</a>         <span class="keyword">inline</span> <a class="code" href="../../de/dfd/classCell.html#a0">Cell::Cell</a>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> P = 0, state S = undecided)
00023                 : State(S)
00024         {
00025                 <span class="keywordflow">if</span>(P &gt; 0) {
00026                         <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#r1">Possibilities</a>[0] = P;
00027                         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 1; i &lt; 9; i++)
00028                                 <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#r1">Possibilities</a>[i] = 0;
00029                 } <span class="keywordflow">else</span> {
00030                         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 9; i++)
00031                                 <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#r1">Possibilities</a>[i] = i + 1;
00032                 }
00033         }
00034         
<a name="l00035"></a><a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#a1">00035</a>         <span class="keyword">inline</span> <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#a1">Cell::~Cell</a>() {
00036         }
00037         
<a name="l00044"></a><a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#h0">00044</a>         <span class="keywordtype">void</span> <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#h0">Cell::check</a>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myP) <span class="keywordflow">throw</span>(domain_error) {
00045                 <span class="keywordflow">if</span>(myP &gt;= 10 || myP == 0)
00046                         <span class="keywordflow">throw</span> domain_error(<span class="stringliteral">"possibilities can only be in a range of short unsigned integers [1,9], "</span> \
00047                         <span class="stringliteral">"but it was attempted to use 0 or one of value over 9"</span>);
00048         }
00049         
<a name="l00057"></a><a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#d0">00057</a>         <span class="keywordtype">void</span> <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#d0">Cell::fastDelPossibility</a>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myP) <span class="keywordflow">throw</span>(logic_error) {
00058                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 10; i++) {
00059                         <span class="keywordflow">if</span>(Possibilities[i] == 0)
00060                                 <span class="keywordflow">return</span>;
00061                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Possibilities[i] == myP) {
00062                                 <span class="comment">// Eliminate this value and shift to the left the remaining ones</span>
00063                                 <span class="keywordflow">for</span>(; i &lt; 9; i++) {
00064                                         <span class="keywordflow">if</span>(Possibilities[i + 1] == 0) {
00065                                                 Possibilities[i] = 0;
00066                                                 
00067                                                 <span class="comment">// If it's the only element left, automatically set it to definitive</span>
00068                                                 <span class="keywordflow">if</span>(i == 1)
00069                                                         State = <a class="code" href="../../db/d9c/namespacesudoku.html#a5a1">definitive</a>;
00070                                                 
00071                                                 <span class="keywordflow">break</span>;
00072                                         } <span class="keywordflow">else</span>
00073                                                 Possibilities[i] = Possibilities[i + 1];
00074                                 }
00075                                 <span class="keywordflow">break</span>;
00076                         }
00077                 }
00078                 
00079                 <span class="keywordflow">if</span>(Possibilities[0] == 0)
00080                         <span class="keywordflow">throw</span> logic_error(<span class="stringliteral">"No possibility is left, all of them were deleted"</span>);
00081         }
00082         
00083         
<a name="l00089"></a><a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#d1">00089</a>         <span class="keywordtype">bool</span> <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#d1">Cell::fastIsPossible</a>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myP)<span class="keyword"> const </span>{
00090                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 10; i++) {
00091                         <span class="keywordflow">if</span>(<a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#r1">Possibilities</a>[i] == 0)
00092                                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00093                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#r1">Possibilities</a>[i] == myP)
00094                                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00095                 }
00096                 
00097         }
00098         
<a name="l00103"></a><a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#d2">00103</a>         <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#d2">Cell::fastSet</a>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myP) {
00104                 <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#r0">State</a> = <a class="code" href="../../db/d9c/namespacesudoku.html#a5a1">definitive</a>;
00105                 <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#r1">Possibilities</a>[0] = myP;
00106                 <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#r1">Possibilities</a>[1] = 0; <span class="comment">// the list "ends" in the first element set to zero</span>
00107         }
00108         
<a name="l00112"></a><a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#a2">00112</a>         <span class="keyword">inline</span> <span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>* <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#a2">Cell::getPossibilities</a>() {
00113                 <span class="keywordflow">return</span> <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#r1">Possibilities</a>;
00114         }
00115         
<a name="l00122"></a><a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#a3">00122</a>         <span class="keywordtype">void</span> <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#a3">Cell::addPossibility</a>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myP) <span class="keywordflow">throw</span>(domain_error) {
00123                 
00124                 check(myP); <span class="comment">// this can throw domain_error</span>
00125                 
00126                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 10; i++) {
00127                         <span class="comment">// - If a possibility is set to 0, as it is by default, it means there are no more of them</span>
00128                         <span class="comment">// in the rest of the array</span>
00129                         <span class="keywordflow">if</span>(Possibilities[i] == 0) {
00130                                 Possibilities[i] = myP;
00131                                 <span class="keywordflow">return</span>;
00132                         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Possibilities[i] == myP)
00133                                 <span class="keywordflow">return</span>;
00134                 }
00135         }
00136         
<a name="l00143"></a><a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#a5">00143</a>         <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#a5">Cell::set</a>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myP) <span class="keywordflow">throw</span>(domain_error) {
00144         
00145                 check(myP); <span class="comment">// this can throw domain_error</span>
00146                 
00147                 <span class="keywordflow">if</span>(!fastIsPossible(myP))
00148                         <span class="keywordflow">throw</span> domain_error(<span class="stringliteral">"Attempted to set a definitive value to a cell which was not within "</span> \
00149                         <span class="stringliteral">"the possibilities list of the cell"</span>);
00150                 
00151                 fastSet(myP);
00152         }
00153         
00154         
00155         
00156         
<a name="l00163"></a><a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#a6">00163</a>         <span class="keyword">inline</span> <span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#a6">Cell::get</a>() throw(logic_error) {
00164                 <span class="keywordflow">if</span>(<a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#r0">State</a> == <a class="code" href="../../db/d9c/namespacesudoku.html#a5a1">definitive</a>)
00165                         <span class="keywordflow">return</span> <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#r1">Possibilities</a>[0];
00166                 <span class="keywordflow">else</span>
00167                         <span class="keywordflow">throw</span> logic_error(<span class="stringliteral">"Tried to get cell value when it's still undecided"</span>);
00168         }
00169         
<a name="l00177"></a><a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#a4">00177</a>         <span class="keywordtype">void</span> <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#a4">Cell::delPossibility</a>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myP) <span class="keywordflow">throw</span>(logic_error) {
00178                 <span class="keywordflow">try</span> {
00179                         check(myP);
00180                 } <span class="keywordflow">catch</span>(...) {
00181                         <span class="keywordflow">return</span>;
00182                 }
00183                 
00184                 fastDelPossibility(myP); <span class="comment">// this can throw logic_error</span>
00185         }
00186         
<a name="l00193"></a><a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#a7">00193</a>         <span class="keywordtype">bool</span> <a class="code" href="../../de/dfd/classCell.html#a4">Cell::isPossible</a>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myP)<span class="keyword"> const </span>{
00194                 <span class="keywordflow">try</span> {
00195                         <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#h0">check</a>(myP);
00196                 } <span class="keywordflow">catch</span>(...) {
00197                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00198                 }
00199                 
00200                 <span class="keywordflow">return</span> <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#d1">fastIsPossible</a>(myP);
00201         }
00202         
<a name="l00208"></a><a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#a8">00208</a>         <span class="keyword">inline</span> <a class="code" href="../../d5/dc8/sudoku_8h.html#a3">state</a> <a class="code" href="../../de/dfd/classCell.html#a5">Cell::getState</a>()<span class="keyword"> const </span>{
00209                 <span class="keywordflow">return</span> <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#r0">State</a>;
00210         }
00211         
<a name="l00217"></a><a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#a9">00217</a>         <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="../../de/dfd/classCell.html#a6">Cell::setState</a>(state S) {
00218                 
00219                 <span class="comment">// Clean the possiblities list if needed</span>
00220                 <span class="keywordflow">if</span>(<a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#r0">State</a> == <a class="code" href="../../db/d9c/namespacesudoku.html#a5a1">definitive</a> &amp;&amp; S == <a class="code" href="../../db/d9c/namespacesudoku.html#a5a0">undecided</a>)
00221                 {
00222                         <span class="comment">// Note that as we always need at least one value in the possiblities list</span>
00223                         <span class="comment">// we keep the first one (Possibilities[0])</span>
00224                         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 1; i &lt; 9; i++)
00225                                 <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#r1">Possibilities</a>[i] = 0;
00226                 }
00227                 
00228                 <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#r0">State</a> = S;
00229         }
00230         
<a name="l00238"></a><a class="code" href="../../de/d54/classsudoku_1_1Box.html#a0">00238</a>         <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html">Cell</a>** <a class="code" href="../../de/d54/classsudoku_1_1Box.html#a0">Box::operator[] </a>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i) <span class="keywordflow">throw</span>(domain_error) {
00239                 <span class="keywordflow">if</span>(i &lt; 3)
00240                         <span class="keywordflow">return</span> elements[i];
00241                 <span class="keywordflow">else</span>
00242                         <span class="keywordflow">throw</span> domain_error(<span class="stringliteral">"Tried to access to an illegal array 'x' index for the elements of a Box"</span>);
00243         }
00244         
00245         
<a name="l00254"></a><a class="code" href="../../de/d54/classsudoku_1_1Box.html#a1">00254</a>         <span class="keywordtype">void</span> <a class="code" href="../../de/d54/classsudoku_1_1Box.html#a1">Box::delPossibility</a>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myP, <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html">Cell</a> &amp;cell) {
00255                 <span class="keywordflow">try</span> {
00256                         <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#h0">Cell::check</a>(myP);
00257                 } <span class="keywordflow">catch</span>(...) {
00258                         <span class="keywordflow">return</span>;
00259                 }
00260                 
00261                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 3; i++)
00262                         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; 3; j++)
00263                                 <span class="keywordflow">if</span>(<a class="code" href="../../de/d54/classsudoku_1_1Box.html#r0">elements</a>[i][j] != &amp;cell)
00264                                         <a class="code" href="../../de/d54/classsudoku_1_1Box.html#r0">elements</a>[i][j]-&gt;<a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#d0">fastDelPossibility</a>(myP);
00265                         
00266                 
00267         }
00268         
<a name="l00276"></a><a class="code" href="../../de/d54/classsudoku_1_1Box.html#a2">00276</a>         <span class="keywordtype">bool</span> <a class="code" href="../../de/d54/classsudoku_1_1Box.html#a2">Box::isPossible</a>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myP, <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html">Cell</a>&amp; cell)<span class="keyword"> const </span>{
00277                 <span class="keywordflow">try</span> {
00278                         <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#h0">Cell::check</a>(myP);
00279                 } <span class="keywordflow">catch</span>(...) {
00280                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00281                 }
00282                 
00283                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 3; i++)
00284                         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; 3; j++)
00285                         <span class="keywordflow">if</span>(<a class="code" href="../../de/d54/classsudoku_1_1Box.html#r0">elements</a>[i][j] != &amp;cell &amp;&amp; <a class="code" href="../../de/d54/classsudoku_1_1Box.html#r0">elements</a>[i][j]-&gt;<a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#a7">isPossible</a>(myP))
00286                                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00287                 
00288                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00289         }
00290         
<a name="l00295"></a><a class="code" href="../../d0/d38/classsudoku_1_1Line.html#a0">00295</a>         <a class="code" href="../../d0/d38/classsudoku_1_1Line.html#a0">Line::operator Cell**</a>() {
00296                 <span class="keywordflow">return</span> <a class="code" href="../../d0/d38/classsudoku_1_1Line.html#r0">elements</a>;
00297         }
00298         
<a name="l00303"></a><a class="code" href="../../d0/d38/classsudoku_1_1Line.html#a3">00303</a>         <span class="keywordtype">void</span> <a class="code" href="../../d0/d38/classsudoku_1_1Line.html#a3">Line::deleteAll</a>() {
00304                 <span class="keywordflow">for</span>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; 9; i++)
00305                         <span class="keyword">delete</span> <a class="code" href="../../d0/d38/classsudoku_1_1Line.html#r0">elements</a>[i];
00306         }
00307         
<a name="l00316"></a><a class="code" href="../../d0/d38/classsudoku_1_1Line.html#a1">00316</a>         <span class="keywordtype">void</span> <a class="code" href="../../d0/d38/classsudoku_1_1Line.html#a1">Line::delPossibility</a>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myP, <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html">Cell</a>&amp; cell) throw(logic_error) {
00317                 <span class="keywordflow">try</span> {
00318                         <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#h0">Cell::check</a>(myP);
00319                 } <span class="keywordflow">catch</span>(...) {
00320                         <span class="keywordflow">return</span>;
00321                 }
00322                 
00323                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 9; i++)
00324                         <span class="keywordflow">if</span>(<a class="code" href="../../d0/d38/classsudoku_1_1Line.html#r0">elements</a>[i] != &amp;cell)
00325                                 <a class="code" href="../../d0/d38/classsudoku_1_1Line.html#r0">elements</a>[i]-&gt;<a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#d0">fastDelPossibility</a>(myP);
00326                         
00327                 
00328         }
00329         
<a name="l00337"></a><a class="code" href="../../d0/d38/classsudoku_1_1Line.html#a2">00337</a>         <span class="keywordtype">bool</span> <a class="code" href="../../d0/d38/classsudoku_1_1Line.html#a2">Line::isPossible</a>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> myP, <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html">Cell</a>&amp; cell)<span class="keyword"> const </span>{
00338                 <span class="keywordflow">try</span> {
00339                         <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#h0">Cell::check</a>(myP);
00340                 } <span class="keywordflow">catch</span>(...) {
00341                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00342                 }
00343                 
00344                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 9; i++)
00345                         <span class="keywordflow">if</span>(<a class="code" href="../../d0/d38/classsudoku_1_1Line.html#r0">elements</a>[i] != &amp;cell &amp;&amp; <a class="code" href="../../d0/d38/classsudoku_1_1Line.html#r0">elements</a>[i]-&gt;<a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#a7">isPossible</a>(myP))
00346                                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00347                 
00348                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00349         }
00350         
<a name="l00356"></a><a class="code" href="../../d3/d4a/classsudoku_1_1Board.html#a0">00356</a>         <a class="code" href="../../de/d23/classBoard.html#a0">Board::Board</a>() {
00357                 <span class="keywordflow">for</span>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0, ii = 0, I = 0; I &lt; 9; I++, (I % 3 == 0) ? i++ : i, ii = I % 3) {
00358                         <span class="keywordflow">for</span>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0, jj = 0, J = 0; J &lt; 9; J++, (J % 3 == 0) ? j++ : j, jj = J % 3) {
00359                                 <a class="code" href="../../d3/d4a/classsudoku_1_1Board.html#r2">Boxes</a>[i][j][ii][jj] = <span class="keyword">new</span> <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html">Cell</a>();
00360                                 <a class="code" href="../../d3/d4a/classsudoku_1_1Board.html#r1">Rows</a>[I][J] = <a class="code" href="../../d3/d4a/classsudoku_1_1Board.html#r2">Boxes</a>[i][j][ii][jj];
00361                                 <a class="code" href="../../d3/d4a/classsudoku_1_1Board.html#r0">Cols</a>[J][I] = <a class="code" href="../../d3/d4a/classsudoku_1_1Board.html#r1">Rows</a>[I][J];
00362                         }
00363                 }
00364         }
00365         
<a name="l00370"></a><a class="code" href="../../d3/d4a/classsudoku_1_1Board.html#a1">00370</a>         <a class="code" href="../../de/d23/classBoard.html#a2">Board::~Board</a>() {
00371                 <span class="keywordflow">for</span>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; 10; i++) {
00372                         <a class="code" href="../../d3/d4a/classsudoku_1_1Board.html#r1">Rows</a>[i].<a class="code" href="../../d0/d38/classsudoku_1_1Line.html#a3">deleteAll</a>();
00373                 }
00374         }
00375         
<a name="l00384"></a><a class="code" href="../../d3/d4a/classsudoku_1_1Board.html#a2">00384</a>         <span class="keyword">inline</span> <a class="code" href="../../d0/d38/classsudoku_1_1Line.html">Line</a>&amp; <a class="code" href="../../d3/d4a/classsudoku_1_1Board.html#a2">Board::operator[]</a>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i) <span class="keywordflow">throw</span> (domain_error) {
00385                 <span class="keywordflow">if</span>(i &lt; 9)
00386                         <span class="keywordflow">return</span> Rows[i];
00387                 <span class="keywordflow">else</span>
00388                         <span class="keywordflow">throw</span> domain_error(<span class="stringliteral">"Attempted to access to a non-existant column with an out-of-range 'x' index"</span>);
00389         }
00390         
<a name="l00399"></a><a class="code" href="../../d3/d4a/classsudoku_1_1Board.html#a3">00399</a>         <span class="keyword">inline</span> <a class="code" href="../../d0/d38/classsudoku_1_1Line.html">Line</a>&amp; <a class="code" href="../../d3/d4a/classsudoku_1_1Board.html#a3">Board::getCol</a>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i) <span class="keywordflow">throw</span>(domain_error) {
00400                 <span class="keywordflow">if</span> (i &lt; 9)
00401                         <span class="keywordflow">return</span> Cols[i];
00402                 <span class="keywordflow">else</span>
00403                         <span class="keywordflow">throw</span> domain_error(<span class="stringliteral">"Attempted to access to a non-existant column with an out-of-range 'x' index"</span>);
00404         }
00405         
<a name="l00412"></a><a class="code" href="../../d3/d4a/classsudoku_1_1Board.html#a4">00412</a>         <span class="keyword">inline</span> <a class="code" href="../../d0/d38/classsudoku_1_1Line.html">Line</a>&amp; <a class="code" href="../../d3/d4a/classsudoku_1_1Board.html#a4">Board::getRow</a>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i) <span class="keywordflow">throw</span>(domain_error) {
00413                 <span class="keywordflow">if</span> (i &lt; 9)
00414                         <span class="keywordflow">return</span> Rows[i];
00415                 <span class="keywordflow">else</span>
00416                         <span class="keywordflow">throw</span> domain_error(<span class="stringliteral">"Attempted to access to a non-existant Row with an out-of-range 'y' index"</span>);
00417         }
00418         
<a name="l00426"></a><a class="code" href="../../d3/d4a/classsudoku_1_1Board.html#a5">00426</a>         <span class="keyword">inline</span> <a class="code" href="../../de/d54/classsudoku_1_1Box.html">Box</a>&amp; <a class="code" href="../../d3/d4a/classsudoku_1_1Board.html#a5">Board::getBox</a>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i,<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j) <span class="keywordflow">throw</span>(domain_error) {
00427                 <span class="keywordflow">if</span> (i &lt; 3 &amp;&amp; j &lt; 3)
00428                         <span class="keywordflow">return</span> Boxes[i][j];
00429                 <span class="keywordflow">else</span>
00430                         <span class="keywordflow">throw</span> domain_error(<span class="stringliteral">"Tried to get to a non existant Box by invalid suplied 'x' and 'y' indexes"</span>);
00431         }
00432         
<a name="l00440"></a><a class="code" href="../../d3/d4a/classsudoku_1_1Board.html#a6">00440</a>         <span class="keyword">inline</span> <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html">Cell</a>&amp; <a class="code" href="../../d3/d4a/classsudoku_1_1Board.html#a6">Board::getCell</a>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, <span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j) <span class="keywordflow">throw</span>(domain_error) {
00441                 <span class="keywordflow">if</span> (i &lt; 9 &amp;&amp; j &lt; 9) {
00442                         <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html">Cell</a>** cell = Rows[i];
00443                         <span class="keywordflow">return</span> *cell[j];
00444                 } <span class="keywordflow">else</span>
00445                         <span class="keywordflow">throw</span> domain_error(<span class="stringliteral">"Tried to get to a non existant Cell providing invalid 'x' and 'y' indexes"</span>);
00446         }
00447         
00448         
00457         <span class="keyword">inline</span> <span class="keywordtype">void</span> Board::setCell(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, <span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j, <span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> value) <span class="keywordflow">throw</span>(domain_error) {
00458                 <span class="keywordflow">if</span> (i &lt; 9 &amp;&amp; j &lt; 9) {
00459                         Rows[i][j]-&gt;<a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#a5">set</a>(value); <span class="comment">// this can throw domain_error</span>
00460                 } <span class="keywordflow">else</span>
00461                         <span class="keywordflow">throw</span> domain_error(<span class="stringliteral">"Tried to set to a non existant Cell providing invalid 'x' and 'y' indexes"</span>);
00462         }
00463         
<a name="l00468"></a><a class="code" href="../../d4/d99/classsudoku_1_1Solver.html#a0">00468</a>         <a class="code" href="../../d4/d99/classsudoku_1_1Solver.html#a0">Solver::Solver</a>(<a class="code" href="../../d3/d4a/classsudoku_1_1Board.html">Board</a>&amp; S) : Sudoku(S) {}
00469         
<a name="l00474"></a><a class="code" href="../../d4/d99/classsudoku_1_1Solver.html#d0">00474</a>         <span class="keywordtype">void</span> <a class="code" href="../../d4/d99/classsudoku_1_1Solver.html#d0">Solver::updatePossibilities</a>() throw(logic_error) {
00475                 <span class="keywordflow">for</span>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0, I = 0; I &lt; 9; I++, (I % 3 == 0) ? i++ : i) {
00476                         <span class="keywordflow">for</span>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0, J = 0; J &lt; 9; J++, (J % 3 == 0) ? j++ : j) {
00477                                 <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html">Cell</a>&amp; cell = *(<a class="code" href="../../d4/d99/classsudoku_1_1Solver.html#r0">Sudoku</a>.<a class="code" href="../../d3/d4a/classsudoku_1_1Board.html#r1">Rows</a>[I][J]);
00478                                 
00479                                 <span class="keywordflow">if</span>(cell.<a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#a8">getState</a>() == <a class="code" href="../../db/d9c/namespacesudoku.html#a5a1">definitive</a>)
00480                                 {
00481                                         <span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> p = cell.<a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#a6">get</a>();
00482                                         <a class="code" href="../../d4/d99/classsudoku_1_1Solver.html#r0">Sudoku</a>.<a class="code" href="../../d3/d4a/classsudoku_1_1Board.html#r2">Boxes</a>[i][j].<a class="code" href="../../de/d54/classsudoku_1_1Box.html#a1">delPossibility</a>(p, cell); <span class="comment">// this can throw logic_error</span>
00483                                         <a class="code" href="../../d4/d99/classsudoku_1_1Solver.html#r0">Sudoku</a>.<a class="code" href="../../d3/d4a/classsudoku_1_1Board.html#r1">Rows</a>[I].<a class="code" href="../../d0/d38/classsudoku_1_1Line.html#a1">delPossibility</a>(p, cell); <span class="comment">// this can throw logic_error</span>
00484                                         <a class="code" href="../../d4/d99/classsudoku_1_1Solver.html#r0">Sudoku</a>.<a class="code" href="../../d3/d4a/classsudoku_1_1Board.html#r0">Cols</a>[J].<a class="code" href="../../d0/d38/classsudoku_1_1Line.html#a1">delPossibility</a>(p, cell); <span class="comment">// this can throw logic_error</span>
00485                                 }
00486                         }
00487                 }
00488         }
00489         
<a name="l00503"></a><a class="code" href="../../d4/d99/classsudoku_1_1Solver.html#h0">00503</a>         <span class="keywordtype">bool</span> <a class="code" href="../../d4/d99/classsudoku_1_1Solver.html#h0">Solver::solveCell</a>(<a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html">Cell</a>&amp; cell, <a class="code" href="../../d0/d38/classsudoku_1_1Line.html">Line</a>&amp; row, <a class="code" href="../../d0/d38/classsudoku_1_1Line.html">Line</a>&amp; col, <a class="code" href="../../de/d54/classsudoku_1_1Box.html">Box</a>&amp; box) throw(domain_error, logic_error) {
00504                 
00505                 <span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>* Possibilities = cell.getPossibilities();
00506                 
00507                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; Possibilities[i] != 0 &amp;&amp; i &lt; 9; i++) {
00508                         <span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pos = Possibilities[i];
00509                         
00510                         <span class="keywordflow">if</span>(!row.isPossible(pos, cell)) {
00511                                 cell.set(pos); <span class="comment">// this can throw domain_error</span>
00512                                 col.<a class="code" href="../../d0/d38/classsudoku_1_1Line.html#a1">delPossibility</a>(pos, cell); <span class="comment">// this can throw logic_error</span>
00513                                 box.<a class="code" href="../../d0/d38/classsudoku_1_1Line.html#a1">delPossibility</a>(pos, cell); <span class="comment">// this can throw logic_error</span>
00514                                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00515                         } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!col.isPossible(pos, cell)) {
00516                                 cell.set(pos); <span class="comment">// this can throw domain_error</span>
00517                                 row.<a class="code" href="../../d0/d38/classsudoku_1_1Line.html#a1">delPossibility</a>(pos, cell); <span class="comment">// this can throw logic_error</span>
00518                                 box.<a class="code" href="../../d0/d38/classsudoku_1_1Line.html#a1">delPossibility</a>(pos, cell); <span class="comment">// this can throw logic_error</span>
00519                                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00520                         } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!box.isPossible(pos, cell)) {
00521                                 cell.set(pos); <span class="comment">// this can throw domain_error</span>
00522                                 col.<a class="code" href="../../d0/d38/classsudoku_1_1Line.html#a1">delPossibility</a>(pos, cell); <span class="comment">// this can throw logic_error</span>
00523                                 row.<a class="code" href="../../d0/d38/classsudoku_1_1Line.html#a1">delPossibility</a>(pos, cell); <span class="comment">// this can throw logic_error</span>
00524                                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00525                         }
00526                 }
00527                 
00528                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00529         }
00530         
<a name="l00535"></a><a class="code" href="../../d4/d99/classsudoku_1_1Solver.html#a1">00535</a>         <span class="keywordtype">void</span> <a class="code" href="../../d4/d99/classsudoku_1_1Solver.html#a1">Solver::resolve</a>() {
00536                 <span class="keywordtype">bool</span> loop = <span class="keyword">true</span>, temp;
00537                 
00538                 <a class="code" href="../../d4/d99/classsudoku_1_1Solver.html#d0">updatePossibilities</a>();
00539                 
00540                 <span class="keywordflow">while</span>(loop) {
00541                         loop = <span class="keyword">false</span>;
00542                         
00543                         <span class="keywordflow">for</span>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0, I=0; I &lt; 9; I++, (I % 3 == 0) ? i++ : i) {
00544                                 <span class="keywordflow">for</span>(<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0, J = 0; J &lt; 9; J++, (J % 3 == 0) ? j++ : j) {
00545                                         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d99/classsudoku_1_1Solver.html#r0">Sudoku</a>.<a class="code" href="../../d3/d4a/classsudoku_1_1Board.html#r1">Rows</a>[I][J]-&gt;getState() == <a class="code" href="../../db/d9c/namespacesudoku.html#a5a0">undecided</a>) {
00546                                                 temp = <a class="code" href="../../d4/d99/classsudoku_1_1Solver.html#h0">solveCell</a>(*<a class="code" href="../../d4/d99/classsudoku_1_1Solver.html#r0">Sudoku</a>.<a class="code" href="../../d3/d4a/classsudoku_1_1Board.html#r1">Rows</a>[I][J], <a class="code" href="../../d4/d99/classsudoku_1_1Solver.html#r0">Sudoku</a>.<a class="code" href="../../d3/d4a/classsudoku_1_1Board.html#r1">Rows</a>[I], <a class="code" href="../../d4/d99/classsudoku_1_1Solver.html#r0">Sudoku</a>.<a class="code" href="../../d3/d4a/classsudoku_1_1Board.html#r0">Cols</a>[J], <a class="code" href="../../d4/d99/classsudoku_1_1Solver.html#r0">Sudoku</a>.<a class="code" href="../../d3/d4a/classsudoku_1_1Board.html#r2">Boxes</a>[i][j]);
00547                                                 
00548                                                 <span class="keywordflow">if</span>(temp &amp;&amp; !loop)
00549                                                         loop = <span class="keyword">true</span>;
00550                                         }
00551                                 }
00552                         }
00553                 }
00554                 cout &lt;&lt; endl;
00555         }
00556         
<a name="l00562"></a><a class="code" href="../../de/dc3/classsudoku_1_1Display.html#a0">00562</a>         <a class="code" href="../../de/dc3/classsudoku_1_1Display.html#a0">Display::Display</a>(<a class="code" href="../../d3/d4a/classsudoku_1_1Board.html">Board</a>&amp; S) : Sudoku(S) {}
00563         
<a name="l00568"></a><a class="code" href="../../de/dc3/classsudoku_1_1Display.html#a1">00568</a>         <span class="keywordtype">void</span> <a class="code" href="../../de/dc3/classsudoku_1_1Display.html#a1">Display::show</a>() {
00569                 
00570                 system(<span class="stringliteral">"clear"</span>);
00571                 string lineSeparator1(<span class="stringliteral">"---||---|---|---||---|---|---||---|---|---||\n"</span>),
00572                         lineSeparator2(<span class="stringliteral">"---||###|###|###||###|###|###||###|###|###||\n"</span>);
00573                 
00574                 cout &lt;&lt; <span class="stringliteral">"y\\x|| 1 | 2 | 3 || 4 | 5 | 6 || 7 | 8 | 9 ||\n"</span>;
00575                 cout &lt;&lt; lineSeparator2;
00576                 
00577                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 9; i++) {
00578                         cout &lt;&lt; <span class="stringliteral">" "</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">" || "</span>;
00579                         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; 9; j++) {
00580                                 <a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html">Cell</a>&amp; cell = *<a class="code" href="../../de/dc3/classsudoku_1_1Display.html#r0">Sudoku</a>[i][j];
00581                                 
00582                                 <span class="keywordflow">if</span>(cell.<a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#r0">State</a> == <a class="code" href="../../db/d9c/namespacesudoku.html#a5a1">definitive</a>)
00583                                         cout &lt;&lt; cell.<a class="code" href="../../d8/d1c/classsudoku_1_1Cell.html#r1">Possibilities</a>[0];
00584                                 <span class="keywordflow">else</span>
00585                                         cout &lt;&lt; <span class="stringliteral">" "</span>;
00586                                 
00587                                 <span class="keywordflow">if</span>((j + 1) % 3 == 0)
00588                                         cout &lt;&lt; <span class="stringliteral">" || "</span>;
00589                                 <span class="keywordflow">else</span>
00590                                         cout &lt;&lt; <span class="stringliteral">" | "</span>;
00591                                 
00592                         }
00593                         <span class="keywordflow">if</span>((i + 1) % 3 == 0)
00594                                 cout &lt;&lt; endl &lt;&lt; lineSeparator2;
00595                         <span class="keywordflow">else</span>
00596                                 cout &lt;&lt; endl &lt;&lt; lineSeparator1;
00597                 }
00598         }
00599         
<a name="l00600"></a><a class="code" href="../../d1/d30/sudoku2_8cpp.html#a0">00600</a>         <span class="keywordtype">int</span> <a class="code" href="../../d4/d2c/sudokizer_8cpp.html#a0">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv) {
00601         <span class="comment">/*</span>
00602 <span class="comment">                Cell cell(1);</span>
00603 <span class="comment">                cell.addPossibility(2);</span>
00604 <span class="comment">                cell.addPossibility(3);</span>
00605 <span class="comment">                </span>
00606 <span class="comment">                cell.set(2);</span>
00607 <span class="comment">                cout &lt;&lt;  cell.getState() &lt;&lt; endl;</span>
00608 <span class="comment">                </span>
00609 <span class="comment">                cell.setState(undecided);</span>
00610 <span class="comment">                </span>
00611 <span class="comment">                short unsigned int* intArray = cell.getPossibilities();</span>
00612 <span class="comment">                </span>
00613 <span class="comment">                for(int i = 0; i &lt; 9; i++) {</span>
00614 <span class="comment">                        cout &lt;&lt; intArray[i] &lt;&lt; endl;</span>
00615 <span class="comment">                } */</span>
00616                 
00617                 <a class="code" href="../../d3/d4a/classsudoku_1_1Board.html">Board</a> game;
00618                 <a class="code" href="../../de/dc3/classsudoku_1_1Display.html">Display</a> cmd(game);
00619                 <a class="code" href="../../d4/d99/classsudoku_1_1Solver.html">Solver</a> solv(game);
00620                 
00621                 game[0][0]-&gt;set(1);
00622                 game[0][2]-&gt;set(5);
00623                 game[0][3]-&gt;set(2);
00624                 game[0][5]-&gt;set(8);
00625                 game[0][6]-&gt;set(6);
00626                 
00627                 game[1][3]-&gt;set(9);
00628                 game[1][5]-&gt;set(7);
00629                 game[1][6]-&gt;set(8);
00630                 game[1][8]-&gt;set(2);
00631                 
00632                 game[2][5]-&gt;set(1);
00633                 game[2][6]-&gt;set(7);
00634                 
00635                 game[3][0]-&gt;set(9);
00636                 game[3][1]-&gt;set(5);
00637                 game[3][2]-&gt;set(7);
00638                 game[3][6]-&gt;set(1);
00639                 
00640                 game[4][1]-&gt;set(6);
00641                 game[4][2]-&gt;set(8);
00642                 game[4][5]-&gt;set(9);
00643                 game[4][6]-&gt;set(3);
00644                 
00645                 game[5][0]-&gt;set(3);
00646                 game[5][7]-&gt;set(7);
00647                 
00648                 game[6][2]-&gt;set(1);
00649                 game[6][4]-&gt;set(3);
00650                 game[6][8]-&gt;set(7);
00651                 
00652                 game[7][2]-&gt;set(6);
00653                 game[7][6]-&gt;set(2);
00654                 game[7][7]-&gt;set(4);
00655                 
00656                 game[8][1]-&gt;set(9);
00657                 game[8][3]-&gt;set(6);
00658                 game[8][4]-&gt;set(1);
00659                 
00660                 cmd.<a class="code" href="../../de/dc3/classsudoku_1_1Display.html#a1">show</a>();
00661                 
00662                 cout &lt;&lt; <span class="stringliteral">"Hit &lt;Enter&gt; to resolve"</span> &lt;&lt; endl;
00663                 getchar();
00664                 
00665                 
00666                 solv.<a class="code" href="../../d4/d99/classsudoku_1_1Solver.html#a1">resolve</a>();
00667                 cmd.<a class="code" href="../../de/dc3/classsudoku_1_1Display.html#a1">show</a>();
00668                 
00669                 <span class="keywordflow">return</span> 0;
00670         }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sun Oct 9 01:40:26 2005 for sudokizer by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.0 </small></address>
</body>
</html>
